function imgUploadPrev(){function a(){s.find(".img-block").length>5?t.css("display","none"):t.css("display","")}var i=$(".product-img-upload"),n=i.find(".upload-trigger"),t=i.find(".add-one"),e=i.find(".imgUpload"),s=i.find(".img-box"),l=$(s).children().length;n.on("click tap",function(a){$(this).siblings(e).click(),a.preventDefault()}),e.on("change",function(){if("undefined"!=typeof FileReader){var i=/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/,n="",t=0;$($(this)[0].files).each(function(){if(t>5)return!1;var e=$(this);if(!i.test(e[0].name.toLowerCase()))return window.alert(e[0].name+" is not a valid image file."),!1;var d=new FileReader;d.onload=function(i){var t=l+1;n=1===t?"is-active":"";var e='<div class="img-block align-middle"><span class="img-helper"></span><img src="'+i.target.result+'" alt=""><button class="close-button" data-close="" aria-label="Close" type="button"><span aria-hidden="false">Ã—</span></button></div>';s.prepend(e),a(),l++},d.readAsDataURL(e[0]),t++})}else window.alert("This browser does not support HTML5 FileReader.")}),$(i).on("click",".close-button",function(){var i=$(this);i.parent().remove(),a()})}function discField(){var a=$("#add-disc"),i=$(".harga-diskon");a.on("change",function(){a.is(":checked")?i.css("display","block"):i.css("display","none")})}function productVariant(){function a(){l.children().length>0?t.add(e).add(s).attr("readonly",!0):t.add(e).add(s).attr("readonly",!1)}var i=$(".add-product-form"),n=i.find(".add-variant"),t=i.find("#harga"),e=i.find("#harga-diskon"),s=i.find("#stockInput"),l=i.find(".variant-wrapper"),d=l.children().length;d+=1,n.on("click tap",function(i){var n=t.val(),r=e.val(),o=s.val(),c='<div class="variant-box variant'+d+'"><div class="row"><div class="small-12 column"><div class="var-title"><strong>Varian <span class="idx">'+d+'</span></strong><a class="fr del-var">Hapus</a></div><div class="fblock variant-kind"><input type="text" id="variantName" placeholder="Contoh: Merah atau Size S"></div><div class="fblock harga-block"><label for="varharga">Harga Normal</label><div class="input-group"><span class="input-group-label">Rp</span><input type="text" id="varharga" class="harga varharga" value="'+n+'"></div></div><div class="fblock harga-diskon"><label for="harga-diskon">Harga Diskon</label><div class="input-group"><span class="input-group-label">Rp</span><input type="text" id="varharga-diskon" class="harga varhargadisk" value="'+r+'"></div></div><div class="fblock stock-input"><label for="varstockInput">Stock</label><input type="text" id="varstockInput" class="numbers varstockInput" value="'+o+'"></div></div></div></div>';d++,l.append(c),a(),i.preventDefault()}),i.on("click tap",".del-var",function(){$(this).parents(".variant-box").remove(),--d,$(".variant-box").each(function(a){$(this).find(".idx").text(a+1)}),a()})}imgUploadPrev(),discField(),productVariant();