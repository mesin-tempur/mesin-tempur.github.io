!function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function($){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof $},toStr:function e(n){return t.isUndefined(n)||null===n?"":n+""},bind:$.proxy,each:function(t,e){function n(t,n){return e(n,t)}$.each(t,n)},map:$.map,filter:$.grep,every:function(t,e){var n=!0;return t?($.each(t,function(i,r){if(!(n=e.call(null,r,i,t)))return!1}),!!n):n},some:function(t,e){var n=!1;return t?($.each(t,function(i,r){if(n=e.call(null,r,i,t))return!1}),!!n):n},mixin:$.extend,identity:function(t){return t},clone:function(t){return $.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function t(e){function n(){return String(e)}return $.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,u,a;return u=function(){i=null,n||(r=t.apply(s,o))},a=n&&!i,clearTimeout(i),i=setTimeout(u,e),a&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(u,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),e="0.11.1",n=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function n(i){return i=t.isArray(i)?i:[].slice.call(arguments,0),function n(r){var s=[];return t.each(i,function(n){s=s.concat(e(t.toStr(r[n])))}),s}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),i=function(){"use strict";function e(e){this.maxSize=t.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=$.noop)}function n(){this.head=this.tail=null}function i(t,e){this.key=t,this.val=e,this.prev=this.next=null}return t.mixin(e.prototype,{set:function t(e,n){var r=this.list.tail,s;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key],this.size--),(s=this.hash[e])?(s.val=n,this.list.moveToFront(s)):(s=new i(e,n),this.list.add(s),this.hash[e]=s,this.size++)},get:function t(e){var n=this.hash[e];if(n)return this.list.moveToFront(n),n.val},reset:function t(){this.size=0,this.hash={},this.list=new n}}),t.mixin(n.prototype,{add:function t(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function t(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),e}(),r=function(){"use strict";function e(e,n){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=n||o,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function r(t){return $.parseJSON(t)}function s(t){var e,n,i=[],r=o.length;for(e=0;e<r;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}var o;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(t){o=null}return t.mixin(e.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(e,r,s){return t.isNumber(s)?this._safeSet(this._ttlKey(e),i(n()+s)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),i(r))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(e){var i=r(this.ls.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}),e}(),s=function(){"use strict";function e(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new i(0):o}var n=0,r={},s=6,o=new i(10);return e.setMaxPendingRequests=function t(e){s=e},e.resetCache=function t(){o.reset()},t.mixin(e.prototype,{_fingerprint:function t(e){return e=e||{},e.url+e.type+$.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),a._cache.set(c,t)}function o(){e(!0)}function u(){n--,delete r[c],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var a=this,c,h;c=this._fingerprint(t),this.cancelled||c!==this.lastReq||((h=r[c])?h.done(i).fail(o):n<s?(n++,r[c]=this._send(t).done(i).fail(o).always(u)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n){var i,r;n=n||$.noop,e=t.isString(e)?{url:e}:e||{},r=this._fingerprint(e),this.cancelled=!1,this.lastReq=r,(i=this._cache.get(r))?n(null,i):this._get(e,n)},cancel:function(){this.cancelled=!0}}),e}(),o=window.SearchIndex=function(){"use strict";function e(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.identify=e.identify||t.stringify,this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function n(e){return e=t.filter(e,function(t){return!!t}),e=t.map(e,function(t){return t.toLowerCase()})}function i(){var t={};return t[u]=[],t[o]={},t}function r(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function s(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;n<s&&i<o;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var o="c",u="i";return t.mixin(e.prototype,{bootstrap:function t(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var r=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,a;r.datums[s=r.identify(e)]=e,a=n(r.datumTokenizer(e)),t.each(a,function(t){var e,n,a;for(e=r.trie,n=t.split("");a=n.shift();)e=e[o][a]||(e[o][a]=i()),e[u].push(s)})})},get:function e(n){var i=this;return t.map(n,function(t){return i.datums[t]})},search:function e(i){var a=this,c,h;return c=n(this.queryTokenizer(i)),t.each(c,function(t){var e,n,i,r;if(h&&0===h.length)return!1;for(e=a.trie,n=t.split("");e&&(i=n.shift());)e=e[o][i];if(!e||0!==n.length)return h=[],!1;r=e[u].slice(0),h=h?s(h,r):r}),h?t.map(r(h),function(t){return a.datums[t]}):[]},all:function t(){var e=[];for(var n in this.datums)e.push(this.datums[n]);return e},reset:function t(){this.datums={},this.trie=i()},serialize:function t(){return{datums:this.datums,trie:this.trie}}}),e}(),u=function(){"use strict";function e(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(e.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},store:function t(e){this.cache&&(this.storage.set(n.data,e,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function t(){var e={},i;return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),i=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!i?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,i.transform(e))}var i=this,r;t&&(r=this.prepare(this._settings()),this.transport(r).fail(e).done(n))},clear:function t(){return this.storage.clear(),this}}),e}(),a=function(){"use strict";function e(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return t.mixin(e.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},get:function t(e,n){function i(t,e){n(t?[]:r.transform(e))}var r=this,s;if(n)return e=e||"",s=this.prepare(e,this._settings()),this.transport.get(s,i)},cancelLastRequest:function t(){this.transport.cancel()}}),e}(),c=function(){"use strict";function n(n){var i;return n?(i={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,n=t.mixin(i,n),!n.url&&$.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=e+n.thumbprint,n.transport=n.transport?o(n.transport):$.ajax,n):null}function i(e){var n;if(e)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},e=t.isString(e)?{url:e}:e,e=t.mixin(n,e),!e.url&&$.error("remote requires url to be set"),e.transform=e.filter||e.transform,e.prepare=r(e),e.limiter=s(e),e.transport=e.transport?o(e.transport):$.ajax,delete e.replace,delete e.wildcard,delete e.rateLimitBy,delete e.rateLimitWait,e}function r(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,o;return r=t.prepare,s=t.replace,o=t.wildcard,r||(r=s?e:t.wildcard?n:i)}function s(e){function n(e){return function n(i){return t.debounce(i,e)}}function i(e){return function n(i){return t.throttle(i,e)}}var r,s,o;return r=e.limiter,s=e.rateLimitBy,o=e.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(o):n(o)),r}function o(e){return function n(i){function r(e){t.defer(function(){o.resolve(e)})}function s(e){t.defer(function(){o.reject(e)})}var o=$.Deferred();return e(i,r,s),o}}return function e(r){var s,o;return s={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},r=t.mixin(s,r||{}),!r.datumTokenizer&&$.error("datumTokenizer is required"),!r.queryTokenizer&&$.error("queryTokenizer is required"),o=r.sorter,r.sorter=o?function(t){return t.sort(o)}:t.identity,r.local=t.isFunction(r.local)?r.local():r.local,r.prefetch=n(r.prefetch),r.remote=i(r.remote),r}}();return function(){"use strict";function e(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new a(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}var i;return i=window&&window.Bloodhound,e.noConflict=function t(){return window&&(window.Bloodhound=i),e},e.tokenizers=n,t.mixin(e.prototype,{__ttAdapter:function t(){function e(t,e,n){return i.search(t,e,n)}function n(t,e){return i.search(t,e)}var i=this;return this.remote?e:n},_loadPrefetch:function t(){function e(t,e){if(t)return i.reject();n.add(e),n.prefetch.store(n.index.serialize()),i.resolve()}var n=this,i,r;return i=$.Deferred(),this.prefetch?(r=this.prefetch.fromCache())?(this.index.bootstrap(r),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function t(){function e(){n.add(n.local)}var n=this,i;return this.clear(),(this.initPromise=this._loadPrefetch()).done(e),this.initPromise},initialize:function t(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function t(e){return this.index.add(e),this},get:function e(n){return n=t.isArray(n)?n:[].slice.call(arguments),this.index.get(n)},search:function e(n,i,r){function s(e){var n=[];t.each(e,function(e){!t.some(u,function(t){return o.identify(e)===o.identify(t)})&&n.push(e)}),r&&r(n)}var o=this,u;return u=this.sorter(this.index.search(n)),i(this.remote?u.slice():u),this.remote&&u.length<this.sufficient?this.remote.get(n,s):this.remote&&this.remote.cancelLastRequest(),this},all:function t(){return this.index.all()},clear:function t(){return this.index.reset(),this},clearPrefetchCache:function t(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function t(){return s.resetCache(),this},ttAdapter:function t(){return this.__ttAdapter()}}),e}()}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function($){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof $},toStr:function e(n){return t.isUndefined(n)||null===n?"":n+""},bind:$.proxy,each:function(t,e){function n(t,n){return e(n,t)}$.each(t,n)},map:$.map,filter:$.grep,every:function(t,e){var n=!0;return t?($.each(t,function(i,r){if(!(n=e.call(null,r,i,t)))return!1}),!!n):n},some:function(t,e){var n=!1;return t?($.each(t,function(i,r){if(n=e.call(null,r,i,t))return!1}),!!n):n},mixin:$.extend,identity:function(t){return t},clone:function(t){return $.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function t(e){function n(){return String(e)}return $.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,u,a;return u=function(){i=null,n||(r=t.apply(s,o))},a=n&&!i,clearTimeout(i),i=setTimeout(u,e),a&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(u,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),e=function(){"use strict";function e(e){var o,u;return u=t.mixin({},s,e),o={css:r(),classes:u,html:n(u),selectors:i(u)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(t,e){n[e]="."+t}),n}function r(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),n=function(){"use strict";function e(t){t&&t.el||$.error("EventBus initialized without el"),this.$el=$(t.el)}var n,i;return n="typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(e.prototype,{_trigger:function(t,e){var i;return i=$.Event(n+t),(e=e||[]).unshift(i),this.$el.trigger.apply(this.$el,e),i},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=i[t])&&this._trigger(e,[].slice.call(arguments,1))}}),e}(),i=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(a),n=i?u(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(a);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(a),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&c(o);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&r<s;r+=1)i=!1===t[r].apply(e,n);return!i}return i}function o(){var t;return t=window.setImmediate?function t(e){setImmediate(function(){e()})}:function t(e){setTimeout(function(){e()},0)}}function u(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var a=/\s+/,c=o();return{onSync:n,onAsync:e,off:i,trigger:r}}(),r=function(e){"use strict";function n(e,n,i){for(var r=[],s,o=0,u=e.length;o<u;o++)r.push(t.escapeRegExChars(e[o]));return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function r(s){function o(t){var n,i,r;return(n=a.exec(t.data))&&(r=e.createElement(s.tagName),s.className&&(r.className=s.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function u(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],3===n.nodeType?r+=e(n)?1:0:u(n,e)}var a;s=t.mixin({},i,s),s.node&&s.pattern&&(s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],a=n(s.pattern,s.caseSensitive,s.wordsOnly),u(s.node,o))}}(window.document),s=function(){"use strict";function e(e,i){e=e||{},e.input||$.error("input is missing"),i.mixin(this),this.$hint=$(e.hint),this.$input=$(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function n(t){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function r(t,n){return e.normalizeQuery(t)===e.normalizeQuery(n)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},e.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(e.prototype,i,{_onBlur:function t(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function t(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function t(e){var n=o[e.which||e.keyCode];this._managePreventDefault(n,e),n&&this._shouldTrigger(n,e)&&this.trigger(n+"Keyed",e)},_onInput:function t(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function t(e,n){var i;switch(e){case"up":case"down":i=!s(n);break;default:i=!1}i&&n.preventDefault()},_shouldTrigger:function t(e,n){var i;switch(e){case"tab":i=!s(n);break;default:i=!0}return i},_checkLanguageDirection:function t(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function t(e,n){var i,s;i=r(e,this.query),s=!!i&&this.query.length!==e.length,this.query=e,n||i?!n&&s&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e=this,n,i,r,s;return n=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),r=t.bind(this._onKeydown,this),s=t.bind(this._onInput,this),this.$input.on("blur.tt",n).on("focus.tt",i).on("keydown.tt",r),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(n){o[n.which||n.keyCode]||t.defer(t.bind(e._onInput,e,n))}),this},focus:function t(){this.$input.focus()},blur:function t(){this.$input.blur()},getLangDir:function t(){return this.dir},getQuery:function t(){return this.query||""},setQuery:function t(e,n){this.setInputValue(e),this._setQuery(e,n)},hasQueryChangedSinceLastFocus:function t(){return this.query!==this.queryWhenFocused},getInputValue:function t(){return this.$input.val()},setInputValue:function t(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function t(){this.setInputValue(this.query)},getHint:function t(){return this.$hint.val()},setHint:function t(e){this.$hint.val(e)},clearHint:function t(){this.setHint("")},clearHintIfInvalid:function t(){var e,n,i,r;e=this.getInputValue(),n=this.getHint(),i=e!==n&&0===n.indexOf(e),!(r=""!==e&&i&&!this.hasOverflow())&&this.clearHint()},hasFocus:function t(){return this.$input.is(":focus")},hasOverflow:function t(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function t(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=$("<div>")}}),e}(),o=function(){"use strict";function e(e,i){e=e||{},e.templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||$.error("missing source"),e.node||$.error("missing node"),e.name&&!o(e.name)&&$.error("invalid dataset name: "+e.name),i.mixin(this),this.highlight=!!e.highlight,this.name=e.name||a(),this.limit=e.limit||5,this.displayFn=n(e.display||e.displayKey),this.templates=s(e.templates,this.displayFn),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=t.isUndefined(e.async)?this.source.length>2:!!e.async,this._resetLastSuggestion(),this.$el=$(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function s(e,n){function i(t){return $("<div>").text(n(t))}return{notFound:e.notFound&&t.templatify(e.notFound),pending:e.pending&&t.templatify(e.pending),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,a;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},a=t.getIdGenerator(),e.extractData=function t(e){var n=$(e);return n.data(u.obj)?{val:n.data(u.val)||"",obj:n.data(u.obj)||null}:null},t.mixin(e.prototype,i,{_overwrite:function t(e,n){n=n||[],n.length?this._renderSuggestions(e,n):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,n,!1)},_append:function t(e,n){n=n||[],n.length&&this.$lastSuggestion.length?this._appendSuggestions(e,n):n.length?this._renderSuggestions(e,n):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,n,!0)},_renderSuggestions:function t(e,n){var i;i=this._getSuggestionsFragment(e,n),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,n)).append(this._getFooter(e,n))},_appendSuggestions:function t(e,n){var i,r;i=this._getSuggestionsFragment(e,n),r=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=r},_renderPending:function t(e){var n=this.templates.pending;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_renderNotFound:function t(e){var n=this.templates.notFound;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_empty:function t(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function e(n,i){var s=this,o;return o=document.createDocumentFragment(),t.each(i,function t(e){var i,r;r=s._injectQuery(n,e),i=$(s.templates.suggestion(r)).data(u.obj,e).data(u.val,s.displayFn(e)).addClass(s.classes.suggestion+" "+s.classes.selectable),o.appendChild(i[0])}),this.highlight&&r({className:this.classes.highlight,node:o,pattern:n}),$(o)},_getFooter:function t(e,n){return this.templates.footer?this.templates.footer({query:e,suggestions:n,dataset:this.name}):null},_getHeader:function t(e,n){return this.templates.header?this.templates.header({query:e,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function t(){this.$lastSuggestion=$()},_injectQuery:function e(n,i){return t.isObject(i)?t.mixin({_query:n},i):i},update:function t(e){function n(t){o||(o=!0,t=(t||[]).slice(0,r.limit),u=t.length,r._overwrite(e,t),u<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(t){t=t||[],!s&&u<r.limit&&(r.cancel=$.noop,u+=t.length,r._append(e,t.slice(0,r.limit-u)),r.async&&r.trigger("asyncReceived",e))}var r=this,s=!1,o=!1,u=0;this.cancel(),this.cancel=function t(){s=!0,r.cancel=$.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!o&&n([])},cancel:$.noop,clear:function t(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function t(){return this.$el.is(":empty")},destroy:function t(){this.$el=$("<div>")}}),e}(),u=function(){"use strict";function e(e,n){function i(t){var e=r.$node.find(t.node).first();return t.node=e.length?e:$("<div>").appendTo(r.$node),new o(t,n)}var r=this;e=e||{},e.node||$.error("node is required"),n.mixin(this),this.$node=$(e.node),this.query=null,this.datasets=t.map(e.datasets,i)}return t.mixin(e.prototype,i,{_onSelectableClick:function t(e){this.trigger("selectableClicked",$(e.currentTarget))},_onRendered:function t(e,n,i,r){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",n,i,r)},_onCleared:function t(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function t(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function e(){function n(t){return t.isEmpty()}return t.every(this.datasets,n)},_getSelectables:function t(){return this.$node.find(this.selectors.selectable)},_removeCursor:function t(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function t(e){var n,i,r,s;n=e.position().top,i=n+e.outerHeight(!0),r=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),n<0?this.$node.scrollTop(r+n):s<i&&this.$node.scrollTop(r+(i-s))},bind:function(){var e=this,n;return n=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),t.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function t(){return this.$node.hasClass(this.classes.open)},open:function t(){this.$node.addClass(this.classes.open)},close:function t(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function t(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function t(e){var n,i,r,s;return i=this.getActiveSelectable(),n=this._getSelectables(),r=i?n.index(i):-1,s=r+e,s=(s+1)%(n.length+1)-1,s=s<-1?n.length-1:s,-1===s?null:n.eq(s)},setCursor:function t(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function t(e){return e&&e.length?o.extractData(e):null},getActiveSelectable:function t(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function t(){var e=this._getSelectables().first();return e.length?e:null},update:function e(n){function i(t){t.update(n)}var r=n!==this.query;return r&&(this.query=n,t.each(this.datasets,i)),r},empty:function e(){function n(t){t.clear()}t.each(this.datasets,n),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function e(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=$("<div>"),t.each(this.datasets,n)}}),e}(),a=function(){"use strict";function e(){u.apply(this,[].slice.call(arguments,0))}var n=u.prototype;return t.mixin(e.prototype,u.prototype,{open:function t(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function t(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function t(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function t(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function t(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function t(){this.$node.hide()},_show:function t(){this.$node.css("display","block")}}),e}(),c=function(){"use strict";function e(e,i){var r,s,o,u,a,c,h,l,f,d,p;e=e||{},e.input||$.error("missing input"),e.menu||$.error("missing menu"),e.eventBus||$.error("missing event bus"),i.mixin(this),this.eventBus=e.eventBus,this.minLength=t.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),o=n(this,"isActive","isOpen","_onEnterKeyed"),u=n(this,"isActive","isOpen","_onTabKeyed"),a=n(this,"isActive","_onEscKeyed"),c=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),l=n(this,"isActive","isOpen","_onLeftKeyed"),f=n(this,"isActive","isOpen","_onRightKeyed"),d=n(this,"_openIfActive","_onQueryChanged"),p=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",s,this).onSync("enterKeyed",o,this).onSync("tabKeyed",u,this).onSync("escKeyed",a,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",l,this).onSync("rightKeyed",f,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(e){
var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}return t.mixin(e.prototype,{_hacks:function e(){var n,i;n=this.input.$input||$("<div>"),i=this.menu.$node||$("<div>"),n.on("blur.tt",function(e){var r,s,o;r=document.activeElement,s=i.is(r),o=i.has(r).length>0,t.isMsie()&&(s||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function t(e,n){this.select(n)},_onDatasetCleared:function t(){this._updateHint()},_onDatasetRendered:function t(e,n,i,r){this._updateHint(),this.eventBus.trigger("render",i,r,n)},_onAsyncRequested:function t(e,n,i){this.eventBus.trigger("asyncrequest",i,n)},_onAsyncCanceled:function t(e,n,i){this.eventBus.trigger("asynccancel",i,n)},_onAsyncReceived:function t(e,n,i){this.eventBus.trigger("asyncreceive",i,n)},_onFocused:function t(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function t(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&n.preventDefault()},_onTabKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&n.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&n.preventDefault()},_onEscKeyed:function t(){this.close()},_onUpKeyed:function t(){this.moveCursor(-1)},_onDownKeyed:function t(){this.moveCursor(1)},_onLeftKeyed:function t(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function t(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function t(e,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function t(){this._updateHint()},_onLangDirChanged:function t(e,n){this.dir!==n&&(this.dir=n,this.menu.setLanguageDirection(n))},_openIfActive:function t(){this.isActive()&&this.open()},_minLengthMet:function e(n){return n=t.isString(n)?n:this.input.getQuery()||"",n.length>=this.minLength},_updateHint:function e(){var n,i,r,o,u,a,c;n=this.menu.getTopSelectable(),i=this.menu.getSelectableData(n),r=this.input.getInputValue(),!i||t.isBlankString(r)||this.input.hasOverflow()?this.input.clearHint():(o=s.normalizeQuery(r),u=t.escapeRegExChars(o),a=new RegExp("^(?:"+u+")(.+$)","i"),(c=a.exec(i.val))&&this.input.setHint(r+c[1]))},isEnabled:function t(){return this.enabled},enable:function t(){this.enabled=!0},disable:function t(){this.enabled=!1},isActive:function t(){return this.active},activate:function t(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function t(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function t(){return this.menu.isOpen()},open:function t(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function t(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function e(n){this.input.setQuery(t.toStr(n))},getVal:function t(){return this.input.getQuery()},select:function t(e){var n=this.menu.getSelectableData(e);return!(!n||this.eventBus.before("select",n.obj))&&(this.input.setQuery(n.val,!0),this.eventBus.trigger("select",n.obj),this.close(),!0)},autocomplete:function t(e){var n,i,r;return n=this.input.getQuery(),i=this.menu.getSelectableData(e),!(!(r=i&&n!==i.val)||this.eventBus.before("autocomplete",i.obj))&&(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0)},moveCursor:function t(e){var n,i,r,s,o;return n=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),r=this.menu.getSelectableData(i),s=r?r.obj:null,!(o=this._minLengthMet()&&this.menu.update(n))&&!this.eventBus.before("cursorchange",s)&&(this.menu.setCursor(i),r?this.input.setInputValue(r.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),!0)},destroy:function t(){this.input.destroy(),this.menu.destroy()}}),e}();!function(){"use strict";function i(t,e){t.each(function(){var t=$(this),n;(n=t.data(p.typeahead))&&e(n,t)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(p.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function l(e){var n,i;n=e.data(p.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(p.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function f(e){var n,i;return n=t.isJQuery(e)||t.isElement(e),i=n?$(e).first():[],i.length?i:null}var d,p,g;d=$.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function i(h,l){function d(){var e,i,d,m,y,v,_,b,w,S,x;t.each(l,function(t){t.highlight=!!h.highlight}),e=$(this),i=$(g.html.wrapper),d=f(h.hint),m=f(h.menu),y=!1!==h.hint&&!d,v=!1!==h.menu&&!m,y&&(d=r(e,g)),v&&(m=$(g.html.menu).css(g.css.menu)),d&&d.val(""),e=o(e,g),(y||v)&&(i.css(g.css.wrapper),e.css(y?g.css.input:g.css.inputWithNoHint),e.wrap(i).parent().prepend(y?d:null).append(v?m:null)),x=v?a:u,_=new n({el:e}),b=new s({hint:d,input:e},g),w=new x({node:m,datasets:l},g),S=new c({input:b,menu:w,eventBus:_,minLength:h.minLength},g),e.data(p.www,g),e.data(p.typeahead,S)}var g;return l=t.isArray(l)?l:[].slice.call(arguments,1),h=h||{},g=e(h.classNames),this.each(d)},isEnabled:function t(){var e;return i(this.first(),function(t){e=t.isEnabled()}),e},enable:function t(){return i(this,function(t){t.enable()}),this},disable:function t(){return i(this,function(t){t.disable()}),this},isActive:function t(){var e;return i(this.first(),function(t){e=t.isActive()}),e},activate:function t(){return i(this,function(t){t.activate()}),this},deactivate:function t(){return i(this,function(t){t.deactivate()}),this},isOpen:function t(){var e;return i(this.first(),function(t){e=t.isOpen()}),e},open:function t(){return i(this,function(t){t.open()}),this},close:function t(){return i(this,function(t){t.close()}),this},select:function t(e){var n=!1,r=$(e);return i(this.first(),function(t){n=t.select(r)}),n},autocomplete:function t(e){var n=!1,r=$(e);return i(this.first(),function(t){n=t.autocomplete(r)}),n},moveCursor:function t(e){var n=!1;return i(this.first(),function(t){n=t.moveCursor(e)}),n},val:function t(e){var n;return arguments.length?(i(this,function(t){t.setVal(e)}),this):(i(this.first(),function(t){n=t.getVal()}),n)},destroy:function t(){return i(this,function(t,e){l(e),t.destroy()}),this}},$.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function t(){return $.fn.typeahead=d,this}}()});