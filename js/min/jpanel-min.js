!function($){$.jPanelMenu=function(n){"undefined"!=typeof n&&null!=n||(n={});var e={options:$.extend({menu:"#menu",panel:"body",menuClass:"jPanelMenu-menu",panelClass:"jPanelMenu-panel",trigger:".menu-trigger",excludedPanelContent:"style, script",clone:!0,keepEventHandlers:!1,direction:"left",openPosition:"250px",animated:!0,closeOnContentClick:!0,keyboardShortcuts:[{code:27,open:!1,close:!0},{code:37,open:!1,close:!0},{code:39,open:!0,close:!0},{code:77,open:!0,close:!0}],duration:150,openDuration:n.duration||150,closeDuration:n.duration||150,easing:"ease-in-out",openEasing:n.easing||"ease-in-out",closeEasing:n.easing||"ease-in-out",before:function(){},beforeOpen:function(){},beforeClose:function(){},after:function(){},afterOpen:function(){},afterClose:function(){},beforeOn:function(){},afterOn:function(){},beforeOff:function(){},afterOff:function(){}},n),settings:{transitionsSupported:"WebkitTransition"in document.body.style||"MozTransition"in document.body.style||"msTransition"in document.body.style||"OTransition"in document.body.style||"Transition"in document.body.style,transformsSupported:"WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"msTransform"in document.body.style||"OTransform"in document.body.style||"Transform"in document.body.style,cssPrefix:"",panelPosition:"static",positionUnits:"px"},menu:"",panel:"",timeouts:{},clearTimeouts:function(){clearTimeout(e.timeouts.open),clearTimeout(e.timeouts.afterOpen),clearTimeout(e.timeouts.afterClose)},setPositionUnits:function(){for(var n=!1,t=["%","px","em"],o=0;o<t.length;o++){var i=t[o];e.options.openPosition.toString().substr(-i.length)==i&&(n=!0,e.settings.positionUnits=i)}n||(e.options.openPosition=parseInt(e.options.openPosition)+e.settings.positionUnits)},computePositionStyle:function(n,t){var o=n?e.options.openPosition:"0"+e.settings.positionUnits,i={};if(e.settings.transformsSupported){var s=n&&"right"==e.options.direction?"-":"",r="translate3d("+s+o+",0,0)",a="transform";t?(i="",""!=e.settings.cssPrefix&&(i=e.settings.cssPrefix+a+":"+r+";"),i+=a+":"+r+";"):(""!=e.settings.cssPrefix&&(i[e.settings.cssPrefix+a]=r),i[a]=r)}else t?(i="",i=e.options.direction+": "+o+";"):i[e.options.direction]=o;return i},setCSSPrefix:function(){e.settings.cssPrefix=e.getCSSPrefix()},setjPanelMenuStyles:function(){var n="background:#fff",t=$("html").css("background-color"),o=$("body").css("background-color"),i=function(n){var e=[];return $.each(["background-color","background-image","background-position","background-repeat","background-attachment","background-size","background-clip"],function(t,o){""!==n.css(o)&&e.push(o+":"+n.css(o))}),e.join(";")};"transparent"!==o&&"rgba(0, 0, 0, 0)"!==o?n=i($("body")):"transparent"!==t&&"rgba(0, 0, 0, 0)"!==t&&(n=i($("html"))),0==$("#jPanelMenu-style-master").length&&$("body").append('<style id="jPanelMenu-style-master">body{width:100%}.jPanelMenu,body{overflow-x:hidden}#jPanelMenu-menu{display:block;position:fixed;top:0;'+e.options.direction+":0;height:100%;z-index:-1;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch}.jPanelMenu-panel{position:static;"+e.options.direction+":0;top:0;z-index:2;width:100%;min-height:100%;"+n+";}</style>")},setMenuState:function(n){var t=n?"open":"closed";$(e.menu).attr("data-menu-state",t)},getMenuState:function(){return $(e.menu).attr("data-menu-state")},menuIsOpen:function(){return"open"==e.getMenuState()},setMenuStyle:function(n){$(e.menu).css(n)},setPanelStyle:function(n){$(e.panel).css(n)},showMenu:function(){e.setMenuStyle({display:"block"}),e.setMenuStyle({"z-index":"1"})},hideMenu:function(){e.setMenuStyle({"z-index":"-1"}),e.setMenuStyle({display:"none"})},enableTransitions:function(n,t){var o=n/1e3,i=e.getCSSEasingFunction(t);e.disableTransitions(),$("body").append('<style id="jPanelMenu-style-transitions">.jPanelMenu-panel{'+e.settings.cssPrefix+"transition: all "+o+"s "+i+"; transition: all "+o+"s "+i+";}</style>")},disableTransitions:function(){$("#jPanelMenu-style-transitions").remove()},getCSSEasingFunction:function(n){switch(n){case"linear":return n;break;case"ease":return n;break;case"ease-in":return n;break;case"ease-out":return n;break;case"ease-in-out":return n;break;default:return"ease-in-out"}},getJSEasingFunction:function(n){switch(n){case"linear":return n;break;default:return"swing"}},getVendorPrefix:function(){if("result"in arguments.callee)return arguments.callee.result;var n=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,e=document.getElementsByTagName("script")[0];for(var t in e.style)if(n.test(t))return arguments.callee.result=t.match(n)[0];return"WebkitOpacity"in e.style?arguments.callee.result="Webkit":"KhtmlOpacity"in e.style?arguments.callee.result="Khtml":arguments.callee.result=""},getCSSPrefix:function(){var n=e.getVendorPrefix();return""!=n?"-"+n.toLowerCase()+"-":""},openMenu:function(n){"undefined"!=typeof n&&null!=n||(n=e.options.animated),e.clearTimeouts(),e.options.before(),e.options.beforeOpen(),e.setMenuState(!0),e.showMenu();var t={none:!n,transitions:!(!n||!e.settings.transitionsSupported)};if(t.transitions||t.none){t.none&&e.disableTransitions(),t.transitions&&e.enableTransitions(e.options.openDuration,e.options.openEasing);var o=e.computePositionStyle(!0);e.setPanelStyle(o),e.timeouts.afterOpen=setTimeout(function(){e.options.after(),e.options.afterOpen(),e.initiateContentClickListeners()},e.options.openDuration)}else{var i=e.getJSEasingFunction(e.options.openEasing),s={};s[e.options.direction]=e.options.openPosition,$(e.panel).stop().animate(s,e.options.openDuration,i,function(){e.options.after(),e.options.afterOpen(),e.initiateContentClickListeners()})}},closeMenu:function(n){"undefined"!=typeof n&&null!=n||(n=e.options.animated),e.clearTimeouts(),e.options.before(),e.options.beforeClose(),e.setMenuState(!1);var t={none:!n,transitions:!(!n||!e.settings.transitionsSupported)};if(t.transitions||t.none){t.none&&e.disableTransitions(),t.transitions&&e.enableTransitions(e.options.closeDuration,e.options.closeEasing);var o=e.computePositionStyle();e.setPanelStyle(o),e.timeouts.afterClose=setTimeout(function(){e.disableTransitions(),e.hideMenu(),e.options.after(),e.options.afterClose(),e.destroyContentClickListeners()},e.options.closeDuration)}else{var i=e.getJSEasingFunction(e.options.closeEasing),s={};s[e.options.direction]=0+e.settings.positionUnits,$(e.panel).stop().animate(s,e.options.closeDuration,i,function(){e.hideMenu(),e.options.after(),e.options.afterClose(),e.destroyContentClickListeners()})}},triggerMenu:function(n){e.menuIsOpen()?e.closeMenu(n):e.openMenu(n)},initiateClickListeners:function(){$(document).on("click touchend",e.options.trigger,function(n){e.triggerMenu(e.options.animated),n.preventDefault()})},destroyClickListeners:function(){$(document).off("click touchend",e.options.trigger,null)},initiateContentClickListeners:function(){return e.options.closeOnContentClick?void $(document).on("click touchend",e.panel,function(n){e.menuIsOpen()&&e.closeMenu(e.options.animated),n.preventDefault()}):!1},destroyContentClickListeners:function(){return e.options.closeOnContentClick?void $(document).off("click touchend",e.panel,null):!1},initiateKeyboardListeners:function(){var n=["input","textarea","select"];$(document).on("keydown",function(t){var o=$(t.target),i=!1;if($.each(n,function(){o.is(this.toString())&&(i=!0)}),i)return!0;for(mapping in e.options.keyboardShortcuts)if(t.which==e.options.keyboardShortcuts[mapping].code){var s=e.options.keyboardShortcuts[mapping];s.open&&s.close?e.triggerMenu(e.options.animated):!s.open||s.close||e.menuIsOpen()?!s.open&&s.close&&e.menuIsOpen()&&e.closeMenu(e.options.animated):e.openMenu(e.options.animated),t.preventDefault()}})},destroyKeyboardListeners:function(){$(document).off("keydown",null)},setupMarkup:function(){$("html").addClass("jPanelMenu"),0==$(e.panel).length&&$(e.options.panel+" > *").not(e.menu+", "+e.options.excludedPanelContent).wrapAll('<div class="'+e.panel.replace(".","")+'"/>');var n=e.options.clone?$(e.options.menu).clone(e.options.keepEventHandlers):$(e.options.menu);n.addClass(e.menu.replace(".","")).insertAfter(e.options.panel+" > "+e.panel)},resetMarkup:function(){$("html").removeClass("jPanelMenu"),$(e.options.panel+" > "+e.panel+" > *").unwrap(),$(e.menu).remove()},init:function(){e.options.beforeOn(),e.menu="."+e.options.menuClass,e.panel="."+e.options.panelClass,e.setPositionUnits(),e.setCSSPrefix(),e.initiateClickListeners(),"[object Array]"===Object.prototype.toString.call(e.options.keyboardShortcuts)&&e.initiateKeyboardListeners(),e.setjPanelMenuStyles(),e.setMenuState(!1),e.setupMarkup(),e.setPanelStyle({position:e.options.animated&&"static"===e.settings.panelPosition?"relative":e.settings.panelPosition}),e.setMenuStyle({width:e.options.openPosition}),e.closeMenu(!1),e.options.afterOn()},destroy:function(){e.options.beforeOff(),e.closeMenu(),e.destroyClickListeners(),"[object Array]"===Object.prototype.toString.call(e.options.keyboardShortcuts)&&e.destroyKeyboardListeners(),e.resetMarkup();var n={};n[e.options.direction]="auto",e.options.afterOff()}};return{on:e.init,off:e.destroy,trigger:e.triggerMenu,open:e.openMenu,close:e.closeMenu,isOpen:e.menuIsOpen,menu:e.menu,getMenu:function(){return $(e.menu)},panel:e.panel,getPanel:function(){return $(e.panel)},setPosition:function(n){"undefined"!=typeof n&&null!=n||(n=e.options.openPosition),e.options.openPosition=n,e.setMenuStyle({width:e.options.openPosition})}}}}(jQuery);